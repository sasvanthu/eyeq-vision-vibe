{
  "version": 2,
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "env": {
    "VITE_API_BASE_URL": "@vite_api_base_url",
    "VITE_SUPABASE_URL": "https://ndalzqdfqfeuxoznmcmk.supabase.co",
    "VITE_SUPABASE_ANON_KEY": "sb_publishable_10pJxbbmg2Vfhf6vJhN2nQ_k9w2tc9B"
  }
}






































































































module.exports = app;// Export for Vercel});  });    status: err.status || 500    error: err.message || 'Internal Server Error',  res.status(err.status || 500).json({  console.error('Error:', err.message);app.use((err, req, res, next) => {// Error handling middleware}  console.warn('Failed to mount debug route', e && e.message ? e.message : e);} catch (e) {  });    });      }        SUPABASE_SERVICE_KEY: !!process.env.SUPABASE_SERVICE_KEY        SUPABASE_URL: !!process.env.SUPABASE_URL,      env: {      supabaseMsg,      supabaseOk,      firebaseAdmin: fbInitialized,    res.json({    }      supabaseMsg = e.message;    } catch (e) {      }        supabaseMsg = 'Supabase client not available';      } else {        else supabaseOk = true;        if (error) supabaseMsg = error.message || JSON.stringify(error);        const { data, error } = await supabase.from('users').select('uid').limit(1);      if (supabase && supabase.from) {    try {    let supabaseMsg = null;    let supabaseOk = false;    const fbInitialized = firebaseAdmin && firebaseAdmin.apps && firebaseAdmin.apps.length > 0;  app.get('/api/debug', async (req, res) => {  const { admin: firebaseAdmin } = require('../backend/config/firebase');  const supabase = require('../backend/config/supabase');try {// Debug endpointapp.use('/api/achievements', require('../backend/routes/achievementRoutes'));app.use('/api/announcements', require('../backend/routes/announcementRoutes'));app.use('/api/admin', require('../backend/routes/adminRoutes'));app.use('/api/feedback', require('../backend/routes/feedbackRoutes'));app.use('/api/contributions', require('../backend/routes/contributionRoutes'));app.use('/api/projects', require('../backend/routes/projectRoutes'));app.use('/api/auth', require('../backend/routes/authRoutes'));app.use('/api/users', require('../backend/routes/userRoutes'));// API Routes});  });    environment: process.env.NODE_ENV || 'production'    timestamp: new Date().toISOString(),    message: 'EyeQ Backend is running ðŸš€',  res.status(200).json({app.get('/', (req, res) => {// Health Check Routeapp.use(express.json());app.use(cors(corsOptions));// Middleware};  allowedHeaders: ['Content-Type', 'Authorization'],  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],  credentials: true,  },    }      callback(new Error('Not allowed by CORS'));    } else {      callback(null, true);    if (!origin || allowedOrigins.includes(origin)) {  origin: (origin, callback) => {const corsOptions = {];  'http://localhost:8080',  'http://localhost:5173',  'http://localhost:3000',  'https://eyeq-simats.vercel.app',const allowedOrigins = [// CORS Configuration - Production Safeconst app = express();require('../backend/config/firebase');// Initialize Firebase Adminconst cors = require('cors');const express = require('express');require('dotenv').config({ path: path.resolve(__dirname, '..', '.env') });// Load environment variables  "builds": [
    {
      "src": "src/main.tsx",
      "use": "@vercel/static-build",
      "config": {
        "distDir": "dist"
      }
    },
    {
      "src": "api/index.js",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "/api/index.js"
    },
    {
      "src": "/(.*)",
      "dest": "/index.html"
    }
  ],
  "env": {
    "VITE_API_BASE_URL": "@vite_api_base_url",
    "SUPABASE_URL": "@supabase_url",
    "SUPABASE_SERVICE_KEY": "@supabase_service_key",
    "JWT_SECRET": "@jwt_secret",
    "FIREBASE_SERVICE_ACCOUNT_PATH": "@firebase_service_account_path"
  }
}
